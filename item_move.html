<!DOCTYPE html>
<html lang="en">
<style>
    /*  color variables */
    /* whole document */
    body {

        color: #ffffff;
        margin: 10%;

        /* Standard */
    }

    /* outer container */
    .grid-container {

        opacity: 0.6;
        background: #000000;
        padding: 1% 1% 1.5% 1%;
        text-align: center;
        max-height: 30em;
        width: 800px;
    }

    /* inventory/storage middle layer container */
    .item-container {
        display: grid;
        overflow: scroll;
        overflow-x: hidden;
        background-color: #111111;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: auto;
        max-height: 25em;
    }

    /* individual inventory items */
    .item-cell {
        border-style: solid;
        border-width: 0.1em;
        height: 6em;
    }

    /* text boxes underneath items */
    .overlay {
        margin: 1em;
    }

    /* photo images in inventory/storage */
    .item-cell img {
        height: 2.5em;
        cursor: move;
        padding: 1em 0.8em 0em 0.8em;
    }

    /* makes cells change colour on hover */
    .item-cell:hover {
        background-color: yellow;
        color: #000000;
    }


    input {
        width: 3.7em;
        text-align: center;
        font-size: 1.5em;
        border: 1px solid #cccccc;
    }



    /* photo images in inventory/storage */
    .hotbar-item-cell img {
        height: 2.5em;
        cursor: move;
        padding: 1em 0.8em 0em 0.8em;
    }
</style>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!-- navigation -->
<header>
    <section>
    </section>
</header>
<main>
    <section>
        <div class="grid-container">
            <!-- section titles -->
            <div class="item-container">

                <div class="item-cell" id="i1">
                    <div class="item">
                        <div class="overlay"
                             style="text-align: center; color: red; width: 100%; height: 100%; cursor: move"
                        ">
                        Pistol
                    </div>
                </div>
            </div>

            <div class="item-cell" id="i2">
                <div class="item">
                    <img src="https://i.imgur.com/62XOJRo.png" alt="Nightstick"/>
                    <div class="overlay">
                        Nightstick
                    </div>
                </div>
            </div>

            <div class="item-cell" id="i3">
            </div>

            <div class="item-cell" id="i4">
                <div class="item">
                    <img src="https://i.imgur.com/KyJHqZb.png" alt="Taser"/>
                    <div class="overlay">
                        Taser
                    </div>
                </div>
            </div>

            <div class="item-cell" id="i5">
                <div class="item stackable">
                    <img src="https://i.imgur.com/VDsFdmg.png" alt="Blue Waffle"/>
                    <div class="overlay">
                        Blue Waffle
                    </div>
                </div>
            </div>

            <div class="item-cell" id="i6">
                <div class="item stackable">
                    <img src="https://i.imgur.com/Gr4OB7y.png" alt="Chicken Kiev"/>
                    <div class="overlay">
                        Chicken Kiev
                    </div>
                </div>
            </div>

            <div class="item-cell" id="i7">
                <div class="item stackable">
                    <img src="https://i.imgur.com/cWLeZvY.png" alt="Burger"/>
                    <div class="overlay">
                        Cheeseburger
                    </div>
                </div>
            </div>

            <div class="item-cell" id="i8">
            </div>

            <div class="item-cell" id="i9">
                <div class="item stackable">
                    <img src="https://i.imgur.com/HDFnGHm.png" alt="Soylent Green"/>
                    <div class="overlay">
                        Soylent Green
                    </div>
                </div>
            </div>

            <div class="item-cell" id="i10">
                <div class="item stackable">
                    <img src="https://i.imgur.com/oxoNUXW.png" alt="Water"/>
                    <div class="overlay">
                        Water
                    </div>
                </div>
            </div>

            <div class="item-cell" id="i11">
                <div class="item stackable">
                    <img src="https://i.imgur.com/sGpLkhA.png" alt="Chocolate Milk"/>
                    <div class="overlay">
                        Chocolate Milk
                    </div>
                </div>
            </div>

            <div class="item-cell" id="i12">
                <div class="item stackable">
                    <img src="https://i.imgur.com/gxZwJwQ.png" alt="Fudge"/>
                    <div class="overlay">
                        Tactical Fudge
                    </div>
                </div>
            </div>

            <div class="item-cell" id="i13">

            </div>

            <div class="item-cell" id="i14">
                <div class="item stackable">
                    <img src="https://i.imgur.com/HDFnGHm.png" alt="Soylent Green"/>
                    <div class="overlay">
                        Soylent Green
                    </div>
                </div>
            </div>

            <div class="item-cell" id="i15">
            </div>

            <div class="item-cell" id="i16">
            </div>

            <div class="item-cell" id="i17">
            </div>

            <div class="item-cell" id="i18">
            </div>

            <div class="item-cell" id="i19">
                <div class="item stackable">
                    <img src="https://i.imgur.com/uUHnIHF.png" alt="Coffee"/>
                    <div class="overlay">
                        Coffee
                    </div>
                </div>
            </div>


            <div class="item-cell" id="i20">
            </div>

            <div class="item-cell" id="i21">
                <div class="item stackable">
                    <img src="https://i.imgur.com/HDFnGHm.png" alt="Soylent Green"/>
                    <div class="overlay">
                        Soylent Green
                    </div>
                </div>
            </div>

            <div class="item-cell" id="i22">
            </div>

            <div class="item-cell" id="i23">
            </div>

            <div class="item-cell" id="i24">
            </div>

        </div>





</main>
</body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
<script>
    //makes the + button do addition
    function up(max) {
        document.getElementById("num").value = parseInt(document.getElementById("num").value) + 1;
    }

    //makes the - button do subtraction
    function down(min) {
        document.getElementById("num").value = parseInt(document.getElementById("num").value) - 1;
        //stops it going below 1
        if (document.getElementById("num").value <= parseInt(min)) {
            document.getElementById("num").value = min;
        }
    }

    //hide the overlay class
    //$(".overlay").hide();


    // https://stackoverflow.com/questions/26759529/jquery-ui-dropdrag-inventory-with-stackable-items


    //inventory draggability
    //what you see being dragged
    $(function () {
        function createHelper() {
            return $("<div />", {
                css: {
                    border: "2px solid #444",
                    background: "yellow",
                    height: 75,
                    width: 75
                }
            });
        }

        var item_isStackable = "";
        $(".item").draggable({
            scroll: true,
            revert: function (isValidEl) {
                //conditions under which it's not draggable
                if (isValidEl) {
                    return false;
                } else {
                    return true;
                }
            },
            helper: createHelper,
            start: function () {
                $(this).effect("highlight", {}, 1000);
            },
            drag: function (event, ui) {
                item_isStackable = $(this).hasClass("stackable");
                //adds to var item_isStackable if it has the class of stackable
            },
        });
//inventory droppability
        $(".item-cell").droppable({
            accept: ".item",
            //item-cell will only accept .item
            drop: function (event, ui) {
                //large drop function
                var item = $(this).find(".item");
                if (item.length == 0) {
                    console.log("Inserting");
                    ui.draggable.detach().appendTo($(this));
                    //if inv slot is empty insert item
                } else if ($(this).context.innerHTML.includes(ui.draggable.context.innerHTML) == true && item_isStackable == true && item.hasClass("stackable") && ui.draggable.filter(function () {
                    var d = this;
                    return item.filter(function () {
                        return d == this;
                    }).length > 0;
                }).length === 0) {
                    //1st check if droppable and stackable are identical items
                    //2nd check if both clone AND original are stackable
                    //3rd stop (droppable) clone stacking with original
                    console.log("Combining Items");
                    ui.draggable.detach();
                    //if it worked destroy the (draggable) clone
                } else {
                    console.log("Reverting Position");
                    ui.draggable.animate(ui.draggable.data().origPosition, "slow");
                    //if not dropped in a cell revert everything back
                }
            }
        });
    });


</script>
</html>